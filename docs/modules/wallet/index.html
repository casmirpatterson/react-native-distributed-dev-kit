<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Wallet - SDKD</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">SDKD</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../">Overview</a>
</li>
                            
<li class="active">
    <a href="./">Wallet</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#wallet">Wallet</a></li>
        <li class="main "><a href="#getting-started">Getting started</a></li>
        <li class="main "><a href="#usage">Usage</a></li>
        <li class="main "><a href="#basic-functions">Basic Functions</a></li>
            <li><a href="#constructor">Constructor</a></li>
            <li><a href="#activate">Activate</a></li>
            <li><a href="#get-ethereum-address-string">Get ethereum address string</a></li>
            <li><a href="#get-balance">Get balance</a></li>
            <li><a href="#render-address-qr-code">Render address QR code</a></li>
            <li><a href="#send-transaction">Send transaction</a></li>
            <li><a href="#activate-from-recovery-phrase">Activate from recovery phrase</a></li>
        <li class="main "><a href="#advanced-functions">Advanced functions</a></li>
            <li><a href="#get-ethereum-address">Get ethereum address</a></li>
            <li><a href="#get-checksum-address-string">Get checksum address string</a></li>
            <li><a href="#get-public-key">Get public key</a></li>
            <li><a href="#get-public-key-string">Get public key string</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="wallet">Wallet</h1>
<p>The wallet module lets you provision a wallet for a user, and all you need to provide is an email address.  The private key is stored securely on the device in the user's encrypted keychain.  An account entry is created on our servers for the user.  The public address associated with the user is uploaded to our servers.  </p>
<h1 id="getting-started">Getting started</h1>
<p>To install SDKD wallet, follow the instructions below.</p>
<p>Note that in addition to installing the sdkd-wallet npm module, you'll also need to install a few dependencies and rn-nodeify to shim some nodejs packages. This is because react-native doesn't currently have a <a href="https://productpains.com/post/react-native/packager-support-resolvealias-ala-webpack">resolve.alias a la webpack</a>.</p>
<pre><code class="sh">npm i --save react-native-crypto
# install peer deps
npm i --save react-native-randombytes react-native-keychain
react-native link
# install latest rn-nodeify
npm i --save-dev mvayngrib/rn-nodeify
# install node core shims and recursively hack package.json files
# in ./node_modules to add/update the &quot;browser&quot;/&quot;react-native&quot; field with relevant mappings
./node_modules/.bin/rn-nodeify --hack --install
</code></pre>

<p><code>rn-nodeify</code> will create a <code>shim.js</code> in the project root directory</p>
<pre><code class="js">// index.ios.js or index.android.js
// make sure you use `import` and not require!  
import './shim.js'
// ...the rest of your code
</code></pre>

<h1 id="usage">Usage</h1>
<p>To use the wallet, you must import the sdkd config module, and set your sdkd.co API key.  You can get an sdkd.co API key by contacting us using the contact form at sdkd.co</p>
<p>The code below will set your API key, and create a new wallet for a user with email test@example.com.</p>
<p>If no recovery type is chosen, the user will receive an email with a recovery key they can use if they lose access to their phone.</p>
<pre><code class="js">import SDKDConfig from '@sdkd/sdkd'
import SDKDWallet from '@sdkd/sdkd-wallet'
</code></pre>

<pre><code class="js">const SDKD_APIKEY = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhcGlfY2xpZW50X2lkIjoiNGVkNTNiYTAtNTRjYy00M2QwLTk4MDgtZGZiMTY2ZDhhMmI4IiwiY3JlYXRlZF9hdCI6MTUwNzIzNjQ4OH0.z4_h_4iTCYyv0OMCqe6RE0XEvM_DIagTR3lfRbQt74w'

SDKDConfig.init(SDKD_APIKEY)
let w = new SDKDWallet()
w.activate({email: 'test@example.com'})
.then(() =&gt; {
  // The wallet is now ready to go.  You can store it in your state if you want to render stuff like the user's wallet address or a QR code for their address.
  this.setState({wallet: w})
});

</code></pre>

<h1 id="basic-functions">Basic Functions</h1>
<p>This section documents the public functions you can use with the wallet module.</p>
<h2 id="constructor">Constructor</h2>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let w = new SDKDWallet()
</code></pre>

<p>The constructor takes 1 optional argument, a config object with the following properties:</p>
<pre><code class="plain">{
  debug: (Optional) &lt;boolean&gt; - defines whether or not debug statements will be printed to the console
}
</code></pre>

<h2 id="activate">Activate</h2>
<p>Creates or loads the user's wallet account, using their email address as the primary key.<br />
The activate function takes 1 required argument, a config object with the following properties:</p>
<pre><code class="plain">{
  email: (Required) &lt;string&gt; - the users email address,
  recoveryType: (Optional) &lt;string&gt; - one of either 'email' (the default) for 2 factor email recovery or 'phrase' for 24 word passphrase
}
</code></pre>

<ul>
<li>
<p>If the activate function has never been called on this device for a given email, a new wallet will be created for that user.  The private key will be saved in their local keychain.</p>
</li>
<li>
<p>If the activate function has already been called on this device for a given email, the private key will be loaded from the user's keychain. </p>
</li>
</ul>
<h3 id="recovery-type-options">Recovery type options</h3>
<ul>
<li>email: The user's private key will be split into two parts.  The first part will be emailed to the user.  The second part is uploaded to our servers.  If the user loses access to their phone, they can recover the private key by combing these two parts.</li>
<li>phrase: The user's private key will be returned by the activate function promise in the form of a 24 word recovery phrase that follows the widely used bip39 standard.  For security, first account activation is the only time you can ever retrieve the recovery phrase, since this gives you direct access to the user's private key.</li>
</ul>
<p><strong>Example Usage with {recoveryType: 'email'}</strong></p>
<p>Note that there is no need to actually pass {recoveryType: 'email'} because it's the default.</p>
<pre><code class="js">w.activate({email: 'test@example.com'})
.then(() =&gt; {
  // wallet is now provisioned and ready to go.
  // you may want to store it in your state so you can do things like render a QR code for the user's ethereum address
  this.setState({wallet: w})
});
</code></pre>

<p><strong>Example Usage with {recoveryType: 'phrase'}</strong></p>
<pre><code class="js">w.activate({email: 'test@example.com', recoveryType: 'phrase'})
.then((phrase) =&gt; {
  // wallet is now provisioned and ready to go
  // show the user the contents of the 'phrase' variable so that they can write it down for recovery.  This is the only opportunity you will ever have to get the phrase.
  if (phrase !== undefined) { // needed because phrase will only be defined on first account activation
    Alert.alert('Write this down', 'Keep this somewhere safe: ' + phrase)
  }
});
</code></pre>

<h2 id="get-ethereum-address-string">Get ethereum address string</h2>
<p>Returns the ethereum address as a hex string for the wallet.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let address = w.getAddressString()
// do something with address
console.log('Your ethereum address is ' + address)
</code></pre>

<h2 id="get-balance">Get balance</h2>
<p>Returns the a promise that resolves with the user's ETH balance in wei.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let balance = await w.getBalance()
// do something with balance
console.log('Your ethereum balance in wei is ' + balance)
// you may want to store the user's balance in the state if you wish to display it
this.setState({balance})
</code></pre>

<h2 id="render-address-qr-code">Render address QR code</h2>
<p>Renders a 200x200px QR code encoded with the user's ethereum address string.  If you display this on the screen, another user can scan this user's QR code to send them ether or tokens.</p>
<p><strong>Example Usage to show user's balance and a QR code for their address</strong></p>
<pre><code class="jsx">render () {
  return (
    &lt;View style={styles.container}&gt;
      &lt;Text&gt;
        Your balance is {this.state.balance} Wei
      &lt;/Text&gt;
      {this.state.wallet ? this.state.wallet.renderAddressQRCode() : null}
    &lt;/View&gt;
  )
}
</code></pre>

<h2 id="send-transaction">Send transaction</h2>
<p>Sends an ethereum transaction.  This function accepts two arguments: </p>
<ul>
<li>to: the ethereum address to send to</li>
<li>value: the amount of wei to send</li>
</ul>
<p>This function returns a promise that resolves to the transaction hash of the transaction.  </p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">// this will send 100 wei to the example address specified in the first argument.
let txHash = await w.sendTx('0x164f64dac95870b7b1261e233221778b1186102a', 100);
console.log('Your transaction is now live at https://ropsten.etherscan.io/tx/' + txHash)
</code></pre>

<h2 id="activate-from-recovery-phrase">Activate from recovery phrase</h2>
<p>If you originally chose recoveryType: 'phrase' when activating the user's wallet, and they lose access to their phone, you can use this function to recovery a user's private key.</p>
<p>This function takes 2 arguments:</p>
<ul>
<li>email: the user's email</li>
<li>phrase: the recovery phrase</li>
</ul>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let phrase = 'lyrics sport manage dinosaur enemy dish mercy science apple shiver planet lemon lend grain copy equal believe perfect gesture slogan room cycle order abuse'
w.activateFromRecoveryPhrase('text@example.com', phrase)
.then(() =&gt; {
  // wallet is now provisioned and ready to go.
  // you may want to store it in your state so you can do things like render a QR code for the user's ethereum address
  this.setState({wallet: w})
})
</code></pre>

<h1 id="advanced-functions">Advanced functions</h1>
<p>Most users will not need to use these functions, but they are included for your convenience anyway, just in case.  For example, one of these functions give you access to the user's raw public key which you could use for your own cryptographic purposes.</p>
<h2 id="get-ethereum-address">Get ethereum address</h2>
<p>Returns the raw ethereum address for the wallet.  This is an array of bytes.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let address = w.getAddress()
// do something with address
</code></pre>

<h2 id="get-checksum-address-string">Get checksum address string</h2>
<p>Returns the checksum address for the wallet as a hex string.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let chsum = w.getChecksumAddressString()
// do something with chksum
</code></pre>

<h2 id="get-public-key">Get public key</h2>
<p>Returns the raw public key for the wallet.  This is an array of bytes.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let pubKey = w.getPublicKey()
// do something with pubKey
</code></pre>

<h2 id="get-public-key-string">Get public key string</h2>
<p>Returns the public key as a hex string for the wallet.</p>
<p><strong>Example Usage</strong></p>
<pre><code class="js">let pubKey = w.getPublicKeyString()
// do something with pubKey
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
